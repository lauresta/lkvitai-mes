@if (!EffectiveLagSeconds.HasValue)
{
    <span class="badge bg-secondary">Unknown</span>
}
else if (EffectiveLagSeconds.Value < WarnSeconds)
{
    @* Fresh values intentionally render no badge. *@
}
else if (EffectiveLagSeconds.Value < AlertSeconds)
{
    <span class="badge bg-warning text-dark">Stale</span>
}
else
{
    <span class="badge bg-danger">Stale</span>
}

@code {
    [Parameter]
    public double? LagSeconds { get; set; }

    [Parameter]
    public DateTime? LastUpdated { get; set; }

    [Parameter]
    public double WarnSeconds { get; set; } = 5;

    [Parameter]
    public double AlertSeconds { get; set; } = 30;

    private double? EffectiveLagSeconds =>
        LagSeconds ?? (LastUpdated.HasValue
            ? (DateTime.UtcNow - LastUpdated.Value.ToUniversalTime()).TotalSeconds
            : null);
}
