<div class="card shadow-sm h-100 position-relative">
    <LoadingSpinner IsLoading="IsLoading" />

    <div class="card-body">
        <h5 class="card-title mb-3">Recent Activity</h5>

        @if (!string.IsNullOrWhiteSpace(ErrorMessage))
        {
            <ErrorBanner Message="@ErrorMessage"
                         TraceId="@TraceId"
                         OnRetry="OnRetry"
                         OnDismiss="OnDismiss" />
        }
        else if (Items.Count == 0)
        {
            <p class="text-muted mb-0">No recent movements available.</p>
        }
        else
        {
            <div class="list-group" style="max-height: 300px; overflow-y: auto;">
                @foreach (var item in Items)
                {
                    <div class="list-group-item">
                        <div class="d-flex justify-content-between align-items-start gap-3">
                            <div>
                                <div class="fw-semibold">@item.SKU</div>
                                <div class="text-muted small">@item.FromLocation -> @item.ToLocation</div>
                            </div>
                            <div class="text-end">
                                <div class="fw-semibold">@item.Quantity.ToString("N2")</div>
                                <div class="text-muted small">@item.Timestamp.ToLocalTime().ToString("yyyy-MM-dd HH:mm:ss")</div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>

@code {
    [Parameter]
    public IReadOnlyList<RecentMovementDto> Items { get; set; } = Array.Empty<RecentMovementDto>();

    [Parameter]
    public bool IsLoading { get; set; }

    [Parameter]
    public string? ErrorMessage { get; set; }

    [Parameter]
    public string? TraceId { get; set; }

    [Parameter]
    public EventCallback OnRetry { get; set; }

    [Parameter]
    public EventCallback OnDismiss { get; set; }
}
